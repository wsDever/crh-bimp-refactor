const t=window.NbComponent.h,n="$_BUTTON_COUNTDOWN";class o{constructor(){this.width=690,this.height=88,this.bg="#3E86F7",this.color="#ffffff",this.radius=8,this.noBorder=!1,this.countdown=0,this.countdownUnit="s",this.countdownContainer=".countdown",this.loading=!1,this.disable=!1,this.countdownDisplay=Number(sessionStorage.getItem(n)||0)}async done(){const t=this.el.querySelector(this.countdownContainer);return this.disable=!1,this.loading=!1,this.countdownDisplay=0,sessionStorage.removeItem(n),this.count.emit({status:"finish"}),t&&(t.innerHTML=""),!0}get btnStyles(){let t="1px solid transparent";return"#ffffff"===this.bg&&"#ffffff"!==this.color&&(t=`1px solid ${this.color}`),{width:`${this.width/75}rem`,height:`${this.height/75}rem`,borderRadius:`${this.radius/75}rem`,background:this.bg,color:this.color,border:this.noBorder?"none":t}}handleCountdown(){this.disable=!0;const t=this.el.querySelector(this.countdownContainer);return t&&(t.innerHTML=String(this.countdownDisplay)+this.countdownUnit),sessionStorage.setItem(n,String(this.countdownDisplay)),this.countdownDisplay>0?(this.countdownDisplay--,this.countdownTimer=setTimeout(this.handleCountdown.bind(this),1e3)):(clearTimeout(this.countdownTimer),this.done()),!0}async onClick(){return this.loading=!0,this.countdown>0&&(this.countdownDisplay=this.countdown,this.count.emit({status:"start"}),this.handleCountdown()),this.tap.emit({done:this.done.bind(this)}),!0}componentDidLoad(){this.countdownDisplay>0&&this.countdown>0&&(this.count.emit({status:"start"}),this.handleCountdown())}render(){return t("button",{onClick:this.onClick.bind(this),disabled:this.disable||this.loading,class:`btn ${this.loading?"loading":""}`,style:Object.assign({},this.btnStyles)},t("slot",null))}static get is(){return"nb-button-async"}static get encapsulation(){return"shadow"}static get properties(){return{bg:{type:String,attr:"bg"},color:{type:String,attr:"color"},countdown:{type:Number,attr:"countdown"},countdownContainer:{type:String,attr:"countdown-container"},countdownDisplay:{state:!0},countdownUnit:{type:String,attr:"countdown-unit"},disable:{type:Boolean,attr:"disable",mutable:!0},done:{method:!0},el:{elementRef:!0},height:{type:Number,attr:"height"},loading:{type:Boolean,attr:"loading",mutable:!0},noBorder:{type:Boolean,attr:"no-border"},onClick:{method:!0},radius:{type:Number,attr:"radius"},width:{type:Number,attr:"width"}}}static get events(){return[{name:"tap",method:"tap",bubbles:!0,cancelable:!0,composed:!0},{name:"count",method:"count",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return".btn{border:none;outline:none}.btn.loading,.btn[disabled]{opacity:.5}"}}export{o as NbButtonAsync};